/*
  CO2 AND OTHER VOLATILE GASES
    The levels of CO2 in the air and potential health problems are:

    400 ppm: average outdoor air level.
    400–1,000 ppm: typical level found in occupied spaces with good air exchange.
    1,000–2,000 ppm: level associated with complaints of drowsiness and poor air.
    2,000–5,000 ppm: level associated with headaches, sleepiness, and stagnant, stale, stuffy air. Poor concentration, loss of attention, increased heart rate and slight nausea may also be present.
    5,000 ppm: this indicates unusual air conditions where high levels of other gases could also be present. Toxicity or oxygen deprivation could occur. This is the permissible exposure limit for daily workplace exposures.
    40,000 ppm: this level is immediately harmful due to oxygen deprivation.
      Source: Wisconsin Department of Health Services

  TEMPERATURE AND HUMIDITY:
    Summer conditions: optimum temperature of 24.5°C with an acceptable range of 23-26°C
    Winter conditions: optimum temperature of 22°C with an acceptable range of 20-23.5°C

    Humidity in relation to acceptable temperatures in office
    Summer (Light clothing)
    If 30% then 24.5 - 28 °C
    If 60% then 23 - 25.5 °C

    Winter (Warm clothing)
    If 30% then 20.5 - 25.5 °C
    If 60% then 20 - 24 °C

    Optimum humidity levels are between 40% and 60%
    20 to 26 degrees people will become uncomfortable and productivity is likely to drop.
      Source: Canadian Centre of Occupational Health and Safety CSA Z412-17 Office Ergonomics

  MOVING DURING WORKDAY AND RESOURCE PRESENCE MONITORING
    Needs better sources. No good info found online easily.
    For now: move every 30min => good health and resource is actively working. => Better results and less sick leave.
*/

#include "SparkFun_SGP30_Arduino_Library.h"
#include <Wire.h>
#include <SPI.h>
#include <WiFi.h>
#include <PubSubClient.h>
#include <Adafruit_BMP280.h>
#include "kotiot_homeoffice.h" //If the library is in same folder, use quotes.
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include "time.h"

#define SCREEN_WIDTH 128 // OLED display width, in pixels
#define SCREEN_HEIGHT 32 // OLED display height, in pixels
#define OLED_RESET     4 // Reset pin # (or -1 if sharing Arduino reset pin)
#define SCREEN_ADDRESS 0x3C ///< See datasheet for Address; 0x3D for 128x64, 0x3C for 128x32
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

SGP30 airquality;
Adafruit_BMP280 bmp;

const int movementSenosr = 2;
const int enableWorkingButtonPin = 4;
const int hapticMotorPin = 12;

const char* ssid = "xxxxxxx";
const char* password = "xxxxxxxxxxxxxx";
const char* mqtt_server = "192.1.1.1";

WiFiClient espClient;
PubSubClient client(espClient);
long lastMsg = 0;
char msg[50];
int value = 0;

// sensor variable declarations
bool isMoving = false;
bool isWorking = false;
float co2 = 0;
float voc = 0;
float temp = 0;
float pressure = 0;
float altitude = 0;

float altitudeCalibrationValue = 1013.25;
int motionCheckInterval = 1000;
int ariqualityCheckInterval = 1000;

// NTP server values
const char* ntpServer = "pool.ntp.org";
const long  gmtOffset_sec = 3600;
const int   daylightOffset_sec = 3600;
int GMTvalue = 3; //
int daylightValue = 1;


const unsigned char doggo_activity_bitmap_doggo_activity_ACTIVITY_0 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00,
  0x28, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x14, 0x00, 0x66, 0x00, 0x12, 0x00, 0xaa, 0x00,
  0x11, 0xe1, 0x32, 0x00, 0x10, 0x1f, 0x01, 0x00, 0x10, 0x01, 0x00, 0x80, 0x20, 0x01, 0x14, 0x60,
  0x20, 0x00, 0x00, 0x20, 0x20, 0x00, 0x00, 0x60, 0x22, 0x72, 0x3f, 0xc0, 0x15, 0x71, 0xc8, 0x00,
  0x15, 0x58, 0xa4, 0x00, 0x15, 0x4c, 0x5a, 0x00, 0x1d, 0xc3, 0x2e, 0x00, 0x0c, 0xc1, 0xe6, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_activity_ACTIVITY_1 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00,
  0x14, 0x00, 0x00, 0x00, 0x14, 0x00, 0x00, 0x00, 0x14, 0x00, 0x66, 0x00, 0x0a, 0x00, 0xaa, 0x00,
  0x11, 0xe1, 0x32, 0x00, 0x10, 0x1f, 0x01, 0x00, 0x10, 0x01, 0x00, 0x80, 0x20, 0x01, 0x14, 0x60,
  0x20, 0x00, 0x00, 0x20, 0x20, 0x00, 0x00, 0x60, 0x22, 0x72, 0x3f, 0xc0, 0x15, 0x71, 0xc8, 0x00,
  0x15, 0x58, 0xa4, 0x00, 0x15, 0x4c, 0x5a, 0x00, 0x1d, 0xc3, 0x2e, 0x00, 0x0c, 0xc1, 0xe6, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_activity_ACTIVITY_2 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00,
  0x0a, 0x00, 0x00, 0x10, 0x0a, 0x00, 0x00, 0x24, 0x0a, 0x00, 0x66, 0x08, 0x0a, 0x00, 0xaa, 0x10,
  0x11, 0xe1, 0x33, 0x04, 0x10, 0x1f, 0x00, 0xc8, 0x10, 0x01, 0x13, 0xe0, 0x20, 0x01, 0x06, 0x20,
  0x20, 0x00, 0x0c, 0x60, 0x20, 0x00, 0x11, 0xc0, 0x22, 0x72, 0x3e, 0x00, 0x15, 0x71, 0xc8, 0x00,
  0x15, 0x58, 0xa4, 0x00, 0x15, 0x4c, 0x5a, 0x00, 0x1d, 0xc3, 0x2e, 0x00, 0x0c, 0xc1, 0xe6, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_activity_ACTIVITY_3 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x02, 0x80, 0x00, 0x10, 0x04, 0x80, 0x00, 0x24, 0x09, 0x00, 0x66, 0x08, 0x0a, 0x00, 0xaa, 0x10,
  0x11, 0xe1, 0x33, 0x04, 0x10, 0x1f, 0x00, 0xc8, 0x10, 0x01, 0x13, 0xe0, 0x20, 0x01, 0x06, 0x20,
  0x20, 0x00, 0x0c, 0x60, 0x20, 0x00, 0x11, 0xc0, 0x22, 0x72, 0x3e, 0x00, 0x15, 0x71, 0xc8, 0x00,
  0x15, 0x58, 0xa4, 0x00, 0x15, 0x4c, 0x5a, 0x00, 0x1d, 0xc3, 0x2e, 0x00, 0x0c, 0xc1, 0xe6, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_co2_CO2_0 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf7, 0xe0, 0x00, 0x00, 0xf7, 0xe0, 0x00,
  0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x6e, 0x00, 0x00, 0xf7, 0xe6, 0x00,
  0x00, 0xf7, 0xec, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00,
  0x00, 0x01, 0x32, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x00, 0x60,
  0x00, 0x01, 0x14, 0x20, 0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x0f, 0xc0, 0x00, 0x04, 0x12, 0x00,
  0x00, 0x08, 0x02, 0x00, 0x00, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_co2_CO2_1 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf7, 0xe0, 0x00, 0x00, 0xf7, 0xe0, 0x00,
  0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x6e, 0x00, 0x00, 0xf7, 0xe6, 0x00,
  0x00, 0xf7, 0xec, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00,
  0x00, 0x01, 0x32, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x00, 0x60,
  0x00, 0x01, 0x14, 0x20, 0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x0f, 0xc0, 0x00, 0x04, 0x12, 0x00,
  0x00, 0x08, 0x02, 0x00, 0x00, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_co2_CO2_2 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf7, 0xe0, 0x00, 0x00, 0xf7, 0xe0, 0x00,
  0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x6e, 0x00, 0x00, 0xf7, 0xe6, 0x00,
  0x00, 0xf7, 0xec, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x00, 0x60, 0x00, 0x01, 0x14, 0x20,
  0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x0f, 0xc0, 0x00, 0x04, 0x12, 0x00, 0x00, 0x08, 0x02, 0x00,
  0x00, 0x10, 0x02, 0x00, 0x00, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_co2_CO2_3 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf7, 0xe0, 0x00, 0x00, 0xf7, 0xe0, 0x00,
  0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x60, 0x00, 0x00, 0xc6, 0x6e, 0x00, 0x00, 0xf7, 0xe6, 0x00,
  0x00, 0xf7, 0xec, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x00, 0x60, 0x00, 0x01, 0x14, 0x20,
  0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x0f, 0xc0, 0x00, 0x04, 0x12, 0x00, 0x00, 0x08, 0x02, 0x00,
  0x00, 0x10, 0x02, 0x00, 0x00, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_cold_COLD_0 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x20, 0x00, 0x09, 0x0e, 0x50, 0x00, 0x0b, 0x11, 0x20, 0x00,
  0x09, 0x10, 0x00, 0x00, 0x0b, 0x10, 0x00, 0x00, 0x09, 0x10, 0x00, 0x00, 0x0b, 0x11, 0x00, 0x00,
  0x09, 0x0e, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x22, 0x00, 0x0b, 0x00, 0x55, 0x00,
  0x09, 0x00, 0x99, 0x00, 0x0b, 0x00, 0x80, 0x80, 0x0f, 0x00, 0x80, 0x40, 0x1e, 0x80, 0x80, 0x30,
  0x3c, 0x40, 0x8a, 0x10, 0x3e, 0xc0, 0x80, 0x30, 0x3f, 0xc1, 0x07, 0xe0, 0x3f, 0xc2, 0x09, 0x00,
  0x1f, 0x84, 0x01, 0x00, 0x0f, 0x08, 0x01, 0x00, 0x00, 0x0b, 0x09, 0x00, 0x00, 0x0c, 0x95, 0x00,
  0x00, 0x08, 0x55, 0x00, 0x00, 0x38, 0x55, 0x00, 0x00, 0x40, 0x77, 0x00, 0x00, 0x7f, 0xf7, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_cold_COLD_1 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x20, 0x00, 0x09, 0x0e, 0x50, 0x00, 0x0b, 0x11, 0x20, 0x00,
  0x09, 0x10, 0x00, 0x00, 0x0b, 0x10, 0x00, 0x00, 0x09, 0x10, 0x00, 0x00, 0x0b, 0x11, 0x00, 0x00,
  0x09, 0x0e, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x22, 0x00, 0x0b, 0x00, 0x55, 0x00,
  0x09, 0x00, 0x99, 0x00, 0x0b, 0x00, 0x80, 0x80, 0x0f, 0x00, 0x80, 0x40, 0x1e, 0x80, 0x80, 0x30,
  0x3c, 0x40, 0x8a, 0x10, 0x3e, 0xc0, 0x80, 0x30, 0x3f, 0xc1, 0x07, 0xe0, 0x3f, 0xc2, 0x09, 0x00,
  0x1f, 0x84, 0x01, 0x00, 0x0f, 0x08, 0x01, 0x00, 0x00, 0x0b, 0x09, 0x00, 0x00, 0x0c, 0x95, 0x00,
  0x00, 0x08, 0x55, 0x00, 0x00, 0x38, 0x55, 0x00, 0x00, 0x40, 0x77, 0x00, 0x00, 0x7f, 0xf7, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_cold_COLD_2 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x20, 0x00, 0x09, 0x0e, 0x50, 0x00, 0x0b, 0x11, 0x20, 0x00,
  0x09, 0x10, 0x00, 0x00, 0x0b, 0x10, 0x00, 0x00, 0x09, 0x10, 0x00, 0x00, 0x0b, 0x11, 0x00, 0x00,
  0x09, 0x0e, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x44, 0x00, 0x0b, 0x00, 0xaa, 0x00,
  0x09, 0x01, 0x32, 0x00, 0x0b, 0x01, 0x01, 0x00, 0x0f, 0x01, 0x00, 0x80, 0x1e, 0x81, 0x00, 0x60,
  0x3c, 0x41, 0x14, 0x20, 0x3e, 0xc1, 0x00, 0x60, 0x3f, 0xc2, 0x0f, 0xc0, 0x3f, 0xc4, 0x12, 0x00,
  0x1f, 0x88, 0x02, 0x00, 0x0f, 0x08, 0x02, 0x00, 0x00, 0x0b, 0x09, 0x00, 0x00, 0x0c, 0x95, 0x00,
  0x00, 0x08, 0x55, 0x00, 0x00, 0x38, 0x55, 0x00, 0x00, 0x40, 0x77, 0x00, 0x00, 0x7f, 0xf7, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_cold_COLD_3 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x20, 0x00, 0x09, 0x0e, 0x50, 0x00, 0x0b, 0x11, 0x20, 0x00,
  0x09, 0x10, 0x00, 0x00, 0x0b, 0x10, 0x00, 0x00, 0x09, 0x10, 0x00, 0x00, 0x0b, 0x11, 0x00, 0x00,
  0x09, 0x0e, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00,
  0x09, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x09, 0x00, 0x44, 0x00, 0x0b, 0x00, 0xaa, 0x00,
  0x09, 0x01, 0x32, 0x00, 0x0b, 0x01, 0x01, 0x00, 0x0f, 0x01, 0x00, 0x80, 0x1e, 0x81, 0x00, 0x60,
  0x3c, 0x41, 0x14, 0x20, 0x3e, 0xc1, 0x00, 0x60, 0x3f, 0xc2, 0x0f, 0xc0, 0x3f, 0xc4, 0x12, 0x00,
  0x1f, 0x88, 0x02, 0x00, 0x0f, 0x08, 0x02, 0x00, 0x00, 0x0b, 0x09, 0x00, 0x00, 0x0c, 0x95, 0x00,
  0x00, 0x08, 0x55, 0x00, 0x00, 0x38, 0x55, 0x00, 0x00, 0x40, 0x77, 0x00, 0x00, 0x7f, 0xf7, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_hot_HOT_0 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x40, 0x00, 0x12, 0x1c, 0xa0, 0x00, 0x16, 0x22, 0x40, 0x00,
  0x12, 0x20, 0x00, 0x00, 0x16, 0x20, 0x00, 0x00, 0x1a, 0x20, 0x00, 0x00, 0x1e, 0x22, 0x00, 0x00,
  0x1e, 0x1c, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x66, 0x00, 0x1e, 0x00, 0xaa, 0x00,
  0x1e, 0x01, 0x32, 0x00, 0x1e, 0x01, 0x01, 0x00, 0x1e, 0x01, 0x00, 0x80, 0x3d, 0x01, 0x00, 0x60,
  0x78, 0x81, 0x14, 0x20, 0x7d, 0x81, 0x00, 0x60, 0x7f, 0x82, 0x0f, 0xc0, 0x7f, 0x84, 0x12, 0x80,
  0x3f, 0x08, 0x02, 0x80, 0x1e, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x80, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_hot_HOT_1 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x40, 0x00, 0x12, 0x1c, 0xa0, 0x00, 0x16, 0x22, 0x40, 0x00,
  0x12, 0x20, 0x00, 0x00, 0x16, 0x20, 0x00, 0x00, 0x1a, 0x20, 0x00, 0x00, 0x1e, 0x22, 0x00, 0x00,
  0x1e, 0x1c, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x66, 0x00, 0x1e, 0x00, 0xaa, 0x00,
  0x1e, 0x01, 0x32, 0x00, 0x1e, 0x01, 0x01, 0x00, 0x1e, 0x01, 0x00, 0x80, 0x3d, 0x01, 0x00, 0x60,
  0x78, 0x81, 0x14, 0x20, 0x7d, 0x81, 0x00, 0x60, 0x7f, 0x82, 0x0f, 0xc0, 0x7f, 0x84, 0x12, 0x80,
  0x3f, 0x08, 0x02, 0x80, 0x1e, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x00, 0x00, 0x19, 0x2a, 0x80,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_hot_HOT_2 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x40, 0x00, 0x12, 0x1c, 0xa0, 0x00, 0x16, 0x22, 0x40, 0x00,
  0x12, 0x20, 0x00, 0x00, 0x16, 0x20, 0x00, 0x00, 0x1a, 0x20, 0x00, 0x00, 0x1e, 0x22, 0x00, 0x00,
  0x1e, 0x1c, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x66, 0x00, 0x1e, 0x00, 0xaa, 0x00, 0x1e, 0x01, 0x32, 0x00,
  0x1e, 0x01, 0x01, 0x00, 0x1e, 0x01, 0x00, 0x80, 0x1e, 0x01, 0x00, 0x60, 0x3d, 0x01, 0x14, 0x20,
  0x78, 0x81, 0x00, 0x60, 0x7d, 0x82, 0x0f, 0xc0, 0x7f, 0x84, 0x12, 0x80, 0x7f, 0x88, 0x02, 0x80,
  0x3f, 0x10, 0x02, 0x00, 0x1e, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x80, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_hot_HOT_3 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x40, 0x00, 0x12, 0x1c, 0xa0, 0x00, 0x16, 0x22, 0x40, 0x00,
  0x12, 0x20, 0x00, 0x00, 0x16, 0x20, 0x00, 0x00, 0x1a, 0x20, 0x00, 0x00, 0x1e, 0x22, 0x00, 0x00,
  0x1e, 0x1c, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x66, 0x00, 0x1e, 0x00, 0xaa, 0x00, 0x1e, 0x01, 0x32, 0x00,
  0x1e, 0x01, 0x01, 0x00, 0x1e, 0x01, 0x00, 0x80, 0x1e, 0x01, 0x00, 0x60, 0x3d, 0x01, 0x14, 0x20,
  0x78, 0x81, 0x00, 0x60, 0x7d, 0x82, 0x0f, 0xc0, 0x7f, 0x84, 0x12, 0x80, 0x7f, 0x88, 0x02, 0x80,
  0x3f, 0x10, 0x02, 0x00, 0x1e, 0x10, 0x02, 0x00, 0x00, 0x16, 0x12, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x80
};

const unsigned char doggo_activity_bitmap_doggo_idle_Idle_0 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x08, 0x01, 0x32, 0x00,
  0x14, 0x01, 0x01, 0x00, 0x14, 0x01, 0x00, 0x80, 0x14, 0x01, 0x14, 0x60, 0x28, 0x01, 0x00, 0x20,
  0x2f, 0xff, 0x00, 0x60, 0x20, 0x00, 0x3f, 0xc0, 0x20, 0x00, 0x0a, 0x00, 0x20, 0x00, 0x02, 0x00,
  0x20, 0x00, 0x02, 0x00, 0x20, 0x00, 0x12, 0x00, 0x22, 0x7e, 0x2a, 0x00, 0x15, 0x41, 0x2a, 0x00,
  0x15, 0x40, 0xaa, 0x00, 0x15, 0x40, 0xaa, 0x00, 0x1d, 0xc0, 0xee, 0x00, 0x0c, 0xc0, 0x66, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_idle_Idle_1 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x10, 0x01, 0x32, 0x00,
  0x28, 0x01, 0x01, 0x00, 0x28, 0x01, 0x00, 0x80, 0x28, 0x01, 0x14, 0x60, 0x28, 0x01, 0x00, 0x20,
  0x2f, 0xff, 0x00, 0x60, 0x20, 0x00, 0x3f, 0xc0, 0x20, 0x00, 0x12, 0x00, 0x20, 0x00, 0x02, 0x00,
  0x20, 0x00, 0x02, 0x00, 0x20, 0x00, 0x12, 0x00, 0x22, 0x7e, 0x2a, 0x00, 0x15, 0x41, 0x2a, 0x00,
  0x15, 0x40, 0xaa, 0x00, 0x15, 0x40, 0xaa, 0x00, 0x1d, 0xc0, 0xee, 0x00, 0x0c, 0xc0, 0x66, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_idle_Idle_2 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x20, 0x01, 0x32, 0x00,
  0x50, 0x01, 0x01, 0x00, 0x50, 0x01, 0x00, 0x80, 0x50, 0x01, 0x14, 0x60, 0x28, 0x01, 0x00, 0x20,
  0x2f, 0xff, 0x00, 0x60, 0x20, 0x00, 0x3f, 0xc0, 0x20, 0x00, 0x12, 0x00, 0x20, 0x00, 0x02, 0x00,
  0x20, 0x00, 0x02, 0x00, 0x20, 0x00, 0x12, 0x00, 0x22, 0x7e, 0x2a, 0x00, 0x15, 0x41, 0x2a, 0x00,
  0x15, 0x40, 0xaa, 0x00, 0x15, 0x40, 0xaa, 0x00, 0x1d, 0xc0, 0xee, 0x00, 0x0c, 0xc0, 0x66, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_idle_Idle_3 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x10, 0x01, 0x32, 0x00,
  0x28, 0x01, 0x01, 0x00, 0x28, 0x01, 0x00, 0x80, 0x28, 0x01, 0x14, 0x60, 0x28, 0x01, 0x00, 0x20,
  0x2f, 0xff, 0x00, 0x60, 0x20, 0x00, 0x3f, 0xc0, 0x20, 0x00, 0x0a, 0x00, 0x20, 0x00, 0x02, 0x00,
  0x20, 0x00, 0x02, 0x00, 0x20, 0x00, 0x12, 0x00, 0x22, 0x7e, 0x2a, 0x00, 0x15, 0x41, 0x2a, 0x00,
  0x15, 0x40, 0xaa, 0x00, 0x15, 0x40, 0xaa, 0x00, 0x1d, 0xc0, 0xee, 0x00, 0x0c, 0xc0, 0x66, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_sleep_Sleep_0 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x00, 0x40,
  0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x10, 0x00,
  0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xc0,
  0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x08, 0x00, 0x01, 0xff, 0x95, 0xe0, 0x06, 0x00, 0x7f, 0xc0, 0x1e, 0x00, 0x20, 0x20,
  0x21, 0x00, 0x20, 0x10, 0x61, 0xe0, 0xe6, 0xcc, 0x40, 0x19, 0x30, 0x04, 0x7f, 0xfb, 0xff, 0xfc
};

const unsigned char doggo_activity_bitmap_doggo_sleep_Sleep_1 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x80, 0x00, 0x00, 0x00, 0x80,
  0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x08, 0x00,
  0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xc0,
  0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x3e, 0x08, 0x00, 0x01, 0xc1, 0x95, 0xe0, 0x06, 0x00, 0x7f, 0xc0, 0x1e, 0x00, 0x20, 0x20,
  0x21, 0x00, 0x20, 0x10, 0x61, 0xe0, 0xe6, 0xcc, 0x40, 0x19, 0x30, 0x04, 0x7f, 0xfb, 0xff, 0xfc
};

const unsigned char doggo_activity_bitmap_doggo_sleep_Sleep_2 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x01, 0x00,
  0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x10, 0x00,
  0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80,
  0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x3e, 0x08, 0x00, 0x01, 0xc1, 0x95, 0xe0, 0x06, 0x00, 0x7f, 0xc0, 0x1e, 0x00, 0x20, 0x20,
  0x21, 0x00, 0x20, 0x10, 0x61, 0xe0, 0xe6, 0xcc, 0x40, 0x19, 0x30, 0x04, 0x7f, 0xfb, 0xff, 0xfc
};

const unsigned char doggo_activity_bitmap_doggo_sleep_Sleep_3 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x01, 0x00,
  0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x10, 0x00,
  0x00, 0x00, 0x3c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xc0,
  0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x08, 0x00, 0x01, 0xff, 0x95, 0xe0, 0x06, 0x00, 0x7f, 0xc0, 0x1e, 0x00, 0x20, 0x20,
  0x21, 0x00, 0x20, 0x10, 0x61, 0xe0, 0xe6, 0xcc, 0x40, 0x19, 0x30, 0x04, 0x7f, 0xfb, 0xff, 0xfc
};

const unsigned char doggo_activity_bitmap_doggo_wifi_wifi_0 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x14, 0x60, 0x00, 0x01, 0x00, 0x20,
  0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x1f, 0xc0, 0x00, 0x04, 0x02, 0x00, 0x00, 0x08, 0x02, 0x00,
  0x00, 0x08, 0x02, 0x00, 0x00, 0x10, 0x12, 0x00, 0x00, 0x16, 0x2a, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_wifi_wifi_1 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00,
  0x00, 0x00, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x14, 0x60, 0x00, 0x01, 0x00, 0x20,
  0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x1f, 0xc0, 0x00, 0x04, 0x02, 0x00, 0x00, 0x08, 0x02, 0x00,
  0x00, 0x08, 0x02, 0x00, 0x00, 0x10, 0x12, 0x00, 0x00, 0x16, 0x2a, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_wifi_wifi_2 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x84, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x00, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x14, 0x60, 0x00, 0x01, 0x00, 0x20,
  0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x1f, 0xc0, 0x00, 0x04, 0x02, 0x00, 0x00, 0x08, 0x02, 0x00,
  0x00, 0x08, 0x02, 0x00, 0x00, 0x10, 0x12, 0x00, 0x00, 0x16, 0x2a, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};

const unsigned char doggo_activity_bitmap_doggo_wifi_wifi_3 [] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0xcc, 0x00,
  0x00, 0x01, 0x02, 0x00, 0x00, 0x02, 0x79, 0x00, 0x00, 0x00, 0x84, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x00, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00, 0xaa, 0x00, 0x00, 0x01, 0x32, 0x00,
  0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x80, 0x00, 0x01, 0x14, 0x60, 0x00, 0x01, 0x00, 0x20,
  0x00, 0x01, 0x00, 0x60, 0x00, 0x02, 0x1f, 0xc0, 0x00, 0x04, 0x02, 0x00, 0x00, 0x08, 0x02, 0x00,
  0x00, 0x08, 0x02, 0x00, 0x00, 0x10, 0x12, 0x00, 0x00, 0x16, 0x2a, 0x00, 0x00, 0x19, 0x2a, 0x00,
  0x00, 0x10, 0xaa, 0x00, 0x00, 0x70, 0xaa, 0x00, 0x00, 0x80, 0xee, 0x00, 0x00, 0xff, 0xee, 0x00
};


const int doggo_wifi_bitmap_allArray_LEN = 4;
const unsigned char* doggo_wifi_bitmap_allArray[4] = {doggo_activity_bitmap_doggo_wifi_wifi_0, doggo_activity_bitmap_doggo_wifi_wifi_1, doggo_activity_bitmap_doggo_wifi_wifi_2, doggo_activity_bitmap_doggo_wifi_wifi_3};
const int doggo_sleep_bitmap_allArray_LEN = 4;
const unsigned char* doggo_sleep_bitmap_allArray[4] = {doggo_activity_bitmap_doggo_sleep_Sleep_0, doggo_activity_bitmap_doggo_sleep_Sleep_1, doggo_activity_bitmap_doggo_sleep_Sleep_2, doggo_activity_bitmap_doggo_sleep_Sleep_3};
const int doggo_idle_bitmap_allArray_LEN = 4;
const unsigned char* doggo_idle_bitmap_allArray[4] = {doggo_activity_bitmap_doggo_idle_Idle_0, doggo_activity_bitmap_doggo_idle_Idle_1, doggo_activity_bitmap_doggo_idle_Idle_2, doggo_activity_bitmap_doggo_idle_Idle_3};
const int doggo_hot_bitmap_allArray_LEN = 4;
const unsigned char* doggo_hot_bitmap_allArray[4] = {doggo_activity_bitmap_doggo_hot_HOT_0, doggo_activity_bitmap_doggo_hot_HOT_1, doggo_activity_bitmap_doggo_hot_HOT_2, doggo_activity_bitmap_doggo_hot_HOT_3};
const int doggo_cold_bitmap_allArray_LEN = 4;
const unsigned char* doggo_cold_bitmap_allArray[4] = {doggo_activity_bitmap_doggo_cold_COLD_0, doggo_activity_bitmap_doggo_cold_COLD_1, doggo_activity_bitmap_doggo_cold_COLD_2, doggo_activity_bitmap_doggo_cold_COLD_3};
const int doggo_co2_bitmap_allArray_LEN = 4;
const unsigned char* doggo_co2_bitmap_allArray[4] = {doggo_activity_bitmap_doggo_co2_CO2_0, doggo_activity_bitmap_doggo_co2_CO2_1, doggo_activity_bitmap_doggo_co2_CO2_2, doggo_activity_bitmap_doggo_co2_CO2_3};
const int doggo_activity_bitmap_allArray_LEN = 4;
const unsigned char* doggo_activity_bitmap_allArray[4] = {doggo_activity_bitmap_doggo_activity_ACTIVITY_0, doggo_activity_bitmap_doggo_activity_ACTIVITY_1, doggo_activity_bitmap_doggo_activity_ACTIVITY_2, doggo_activity_bitmap_doggo_activity_ACTIVITY_3};


void setup() {
  Serial.begin(9600);
  while ( !Serial ) delay(100);

  // SSD1306_SWITCHCAPVCC = generate display voltage from 3.3V internally
  if (!display.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS)) {
    Serial.println(F("SSD1306 allocation failed"));
    for (;;); // Don't proceed, loop forever
  }

  // Clear the buffer
  display.clearDisplay();

  //-- Setup Wifi and MQTT
  setup_wifi();
  client.setServer(mqtt_server, 1883);
  client.setCallback(callback);

  //-- BMP Temperature and humidity sensor setup
  Serial.println(F("BMP280 test"));
  unsigned status;
  status = bmp.begin();
  if (!status) {
    Serial.println(F("Could not find a valid BMP280 sensor, check wiring or "
                     "try a different address!"));
    Serial.print("SensorID was: 0x"); Serial.println(bmp.sensorID(), 16);
    Serial.print("        ID of 0xFF probably means a bad address\n");
    Serial.print("   ID of 0x56-0x58 represents a BMP 280,\n");
    Serial.print("        ID of 0x60 represents a BME 280.\n");
    while (1) delay(10);
  }
  bmp.setSampling(Adafruit_BMP280::MODE_NORMAL,     /* Operating Mode. */
                  Adafruit_BMP280::SAMPLING_X2,     /* Temp. oversampling */
                  Adafruit_BMP280::SAMPLING_X16,    /* Pressure oversampling */
                  Adafruit_BMP280::FILTER_X16,      /* Filtering. */
                  Adafruit_BMP280::STANDBY_MS_500); /* Standby time. */

  //-- SGP30 CO2 & VOC sensor setup
  Wire.begin();
  if (airquality.begin() == false) {
    Serial.println("No SGP30 -airquality sensor detected. Problem with wiring?");
    while (1);
  }
  airquality.initAirQuality();

  //-- Movement RCWL-0516 microwave radar sensor
  pinMode (movementSenosr, INPUT);

  //-- Button to start and stop working
  pinMode(enableWorkingButtonPin, INPUT);

  //-- Pin for haptic motor
  pinMode(hapticMotorPin, OUTPUT);

  configTime(gmtOffset_sec * GMTvalue, daylightOffset_sec * daylightValue, ntpServer);
  printLocalTime();

  Serial.println("Setup finished.");
}

void setup_wifi() {
  delay(10);
  Serial.println();
  Serial.print("Connecting to ");
  Serial.println(ssid);
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("");
  Serial.println("WiFi connected");
  Serial.println("IP address: ");
  Serial.println(WiFi.localIP());
}

void callback(char* topic, byte* message, unsigned int length) {
  Serial.print("Message arrived on topic: ");
  Serial.print(topic);
  Serial.print(". Message: ");
  String messageTemp;
  
  for (int i = 0; i < length; i++) {
    Serial.print((char)message[i]);
    messageTemp += (char)message[i];
  }
  Serial.println();

  // Feel free to add more if statements to control more GPIOs with MQTT

  // If a message is received on the topic esp32/output, you check if the message is either "on" or "off".
  // Changes the output state according to the message
  if (String(topic) == "esp32/alarm") {
    Serial.print("Changing alarm to ");
    if (messageTemp == "on") {
      Serial.println("on");
      ClimbAndDown(hapticMotorPin, 3);
    }
    else if (messageTemp == "off") {
      Serial.println("off");
    }
  }
}

void reconnect() {
  // Loop until we're reconnected
  while (!client.connected()) {
    Serial.print("Attempting MQTT connection...");
    // Attempt to connect
    if (client.connect("ESP8266Client")) {
      Serial.println("connected");
      // Subscribe
      client.subscribe("esp32/output");
    } else {
      Serial.print("failed, rc=");
      Serial.print(client.state());
      Serial.println(" try again in 5 seconds");
      // Wait 5 seconds before retrying
      delay(5000);
    }
  }
}

void checkResourceButton(bool resourceIsWorking) {
  if (!resourceIsWorking) {
    if (digitalRead(enableWorkingButtonPin) == HIGH) {
      ButtonFeedback(hapticMotorPin, 1);
      Serial.println("enableWorking");
      isWorking = true;
    }
  } else if (resourceIsWorking) {
    if (digitalRead(enableWorkingButtonPin) == LOW) {
      ButtonFeedback(hapticMotorPin, 2);
      Serial.println("disableWorking");
      isWorking = false;
    }
  }
}

//Movement sensor has built in delay.
//TODO: find out the delay
void checkResourceMovement(bool resourceIsMoving) {
  int motion = digitalRead(movementSenosr);
  if (motion == 1) {
    Serial.println("Resource is moving. Sign of life.");
    isMoving = true;
  } else {
    Serial.println("Resource is motionless or slacking.");
    isMoving = false;
  }
  char movementString[8];
  dtostrf(isMoving, 1, 2, movementString);
  client.publish("esp32/movement", movementString);
}

void measureAirQuality() {
  Serial.println("Measuring air quality...");
  airquality.measureAirQuality();
  co2 = airquality.CO2;
  voc = airquality.TVOC;
  Serial.print("CO2: "); Serial.print(co2); Serial.println(" ppm");
  Serial.print("VOC: "); Serial.print(voc); Serial.println(" ppb");

  char co2String[8];
  dtostrf(co2, 1, 2, co2String);
  client.publish("esp32/co2", co2String);
  
  char vocString[8];
  dtostrf(voc, 1, 2, vocString);
  client.publish("esp32/voc", vocString);
}

void measureAthmosphere() {
  Serial.println("Measuring atmosphere...");
  temp = bmp.readTemperature();
  pressure = bmp.readPressure();
  altitude = bmp.readAltitude(altitudeCalibrationValue);
  Serial.print(F("Temperature = ")); Serial.print(temp); Serial.println(" *C");
  Serial.print(F("Pressure = ")); Serial.print(pressure); Serial.println(" Pa");
  Serial.print(F("Approx altitude = ")); Serial.print(altitude);
  /* TODO: make ability to adjust this to local normal to get best altitude readings */
  Serial.println(" m");

  //TODO: make a function
  char tempString[8];
  dtostrf(temp, 1, 2, tempString);
  client.publish("esp32/temp", tempString);

  char pressureString[8];
  dtostrf(pressure, 1, 2, pressureString);
  client.publish("esp32/pressure", pressureString);

  char altString[8];
  dtostrf(altitude, 1, 2, altString);
  client.publish("esp32/altitude", altString);
}

void showAnimation(const unsigned char *bitmaps[], int animationLenght, int frameDelay, int cycleCount) {
  for (int c = 0; c < cycleCount; c++) {
    for (int i = 0; i < animationLenght; i++) {
      display.clearDisplay();
      //cleanaScreenArea(1);
      display.drawBitmap(0, 0, bitmaps[i], 32, 32, 1);
      display.display();
      delay(frameDelay);
    }
  }
}

// Used to only update parts of the info screen by drawing black box on top of old values
void cleanaScreenArea(int area) {
  switch (area) {
    case 1: // Animation area 32x32 from top left
      display.fillRect(0, 0, display.width() / 4, display.height(), SSD1306_BLACK);
      break;
    case 2: // top right
      display.fillRect(display.width() / 2, 0, display.width() / 2, display.height() / 2, SSD1306_BLACK);
      break;
    case 3: // bottom left
      display.fillRect(0, 18, display.width() / 2, display.height() / 2, SSD1306_BLACK);
      break;
    case 4: // bottom right
      display.fillRect(display.width() / 2, 18, display.width() / 2, display.height() / 2, SSD1306_BLACK);
      break;
    default:
      break;
  }
  display.display();
  delay(1);
}

void printLocalTime()
{
  struct tm timeinfo;
  if (!getLocalTime(&timeinfo)) {
    Serial.println("Failed to obtain time");
    return;
  }
  Serial.println(&timeinfo, "%A, %B %d %Y %H:%M:%S");
}

void loop() {
  //  if (!client.connected()) {
  //    reconnect();
  //  }

  showAnimation(doggo_sleep_bitmap_allArray, 4, 300, 4);
  cleanaScreenArea(1);
  

  client.loop();
  //SGP30 needs to warm up. It will display wrong values at start (400 ppm TVOC 0 ppb
  checkResourceButton(isWorking);
  checkResourceMovement(isMoving);
  measureAirQuality();
  measureAthmosphere();
}
